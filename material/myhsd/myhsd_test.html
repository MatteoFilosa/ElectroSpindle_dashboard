<!doctype html>
<html>
<head>
    <!---Bootstrap-->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script src="https://d3js.org/d3.v6.min.js"></script>

    <title>MYHSD</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/myhsd_test.css"></link>
    <script>

      function aggiungiSecondi(valoreIniziale, arraySecondi) {
          var risultato = [];

          for (var i = 0; i < arraySecondi.length; i++) {
            var secondi = arraySecondi[i];
            var tempo = valoreIniziale.split(':');

            var data = new Date();
            data.setHours(parseInt(tempo[0], 10));
            data.setMinutes(parseInt(tempo[1], 10));
            data.setSeconds(parseInt(tempo[2], 10));

            // Aggiungi i secondi al tempo iniziale
            data.setSeconds(data.getSeconds() + secondi);

            // Formatta il tempo in una stringa "ore:minuti:secondi"
            var tempoNuovo = ('0' + data.getHours()).slice(-2) + ':' +
              ('0' + data.getMinutes()).slice(-2) + ':' +
              ('0' + data.getSeconds()).slice(-2);

            risultato.push(tempoNuovo);
          }

          return risultato;
        }

      var globalData = []

      function restoreLoader() {
          console.log("Restoring loader")
          // Creazione del paragrafo
          const loadingParagraph = document.createElement('p');
          loadingParagraph.id = 'loading';
          loadingParagraph.textContent = 'Loading data, please wait...';

          // Creazione del div
          const loaderDiv = document.createElement('div');
          loaderDiv.id = 'loader';

          // Aggiunta degli elementi al DOM
          document.body.appendChild(loadingParagraph);
          document.body.appendChild(loaderDiv);

        }

      function showPopup(message, isSuccess) {
          var popup = document.getElementById("popup");
          popup.textContent = message;
          popup.className = "popup" + (isSuccess ? " success" : " error");
          popup.style.display = "block";

          // Nascondi il popup dopo 3 secondi
          setTimeout(function () {
            popup.style.display = "none";
          }, 3000);
        }


      function rimuoviDuplicati(array) {
          return Array.from(new Set(array));
        }
 

    const colors = [
        "#0074D9", // blu
        "#FF4136", // rosso
        "#2ECC40", // verde
        "#FF851B", // arancione
        "#7FDBFF", // celeste
        "#B10DC9", // viola
        "#FFDC00", // giallo
        "#001f3f", // blu scuro
        "#39CCCC", // verde acqua
        "#F012BE", // magenta
        "#3D9970", // verde scuro
        "#111111", // nero
        "#AAAAAA", // grigio
        "#DDDDDD", // grigio chiaro
      ];


    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
</head>

<body class="mx-4">

<div id = "info"></div>

<div class="container" id = "svg-div">
  <div class="row" id = "svg-row">
    <!--
    <div class="col-sm">
      One of three columns
    </div>
    -->

  </div>
</div>

<script>

  
  d3.json("http://arca.diag.uniroma1.it:8082/data/myhsd/models", { crossOrigin: "anonymous" }).then(function (data) {

    console.log(data)
    document.getElementById("info").innerHTML += "<b>" + data[0].name +"</b><br>"
    document.getElementById("info").innerHTML += data[0].description


    })

  function analytics(button) {

   


      var selectedFeature = button.innerHTML;

      localStorage.setItem("selectedFeature", JSON.stringify(selectedFeature))
      
      var to_add = document.getElementById("selectedValues").childNodes
      var selectedAttributes = []

      for (let i = 0; i <= to_add.length; i++) {

        if (to_add[i] != undefined) {

          if ((to_add[i].id != null) && (to_add[i].checked == true)) {


            selectedAttributes.push(to_add[i].id)
          }
        }
      }

    localStorage.setItem("selectedAttributes", JSON.stringify(selectedAttributes))


    if (selectedAttributes.length > 0) {
      if (selectedFeature == "basic statistics") window.open('basic_statistics.html', '_blank');
      if ((selectedFeature == "pearson") && (selectedAttributes.length == 1)) showPopup("Select at least two attributes to show the pearson correlation.", false)

      else window.open('pearson.html', '_blank');

    }
    else showPopup("Select at least one attribute to continue.", false)
  }
 


  function sleep(time) {
      return new Promise((resolve) => setTimeout(resolve, time));
    }

  function displayTooltip(d) {
      document.getElementById("tooltip").style.visibility = "visible"
     
      var tooltip = document.getElementById("tooltip")
      tooltip.innerHTML = d
      tooltip.style.position = "absolute"
      tooltip.style.top = (event.screenY - 80) + "px"
      tooltip.style.left = (event.screenX - 80) + "px"


    }

    function hideTooltip(d, i, event) {

      document.getElementById("tooltip").style.visibility = "hidden"

    }

  

</script>
</body>
</html>